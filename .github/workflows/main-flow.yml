name: Main workflow

on:
  workflow_dispatch:
    inputs:
      power:
        required: true
        description: 'Turn the VM ON or OFF'
        type: choice
        options:
          - ON
          - OFF
      vm_name:
        required: false
        type: string
        description: 'the name of the vm to be turned on'
      rg_name:
        required: false
        type: string
        description: 'the name of the resource-group the VM belongs to'

jobs:
  call-workflow:
    uses: roel4ez/action-power-on-off-azure-vm/.github/workflows/power-on-azure-vm.yml@main
    with:
      AZURE_VM_NAME: vm-test-gh-action
      AZURE_RG_NAME: vm-test
    secrets:
      AZURE_SP_CLIENTID: ${{ secrets.AZURE_SP_CLIENTID }}
      AZURE_SP_SECRET: ${{ secrets.AZURE_SP_SECRET }}
      AZURE_TENANTID: ${{ secrets.AZURE_TENANTID }}